{% extends "base.html" %}
    {% block title %}The Wall{% endblock %}
    {% block BodyContent %}
    <div class="container text-center top">
        <h1 class="protest-strike-regular">Efraim's Wall</h1>
        {% if 'username' in session %}
        <hr>
<h2 class="mb-2">Welcome, {{ session['username'] }}!</h2>
{% endif %}
        
        <a href="{{ url_for('create_post') }}" class="btn btn-primary">Create New Post</a>
        {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
    <div class="container mt-3">
      {% for category, message in messages %}
        <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
          {{ message }}
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
      {% endfor %}
    </div>
    {% endif %}
    {% endwith %}
        </div>
    <div class="container"> 
        <ul class="list-group mt-4">
            {% for post in posts %}
            <li class="list-group-item">
                <h5><a href="{{ url_for('view_post', post_id=post['_id']) }}">{{ post['title'] }}</a></h5>
                <h6><small>Posted by {{ post['username']}}</small></h6>
                <p>{{ post['content'][:100] }}...</p>
                {% if session['username'] == post['username'] %}


                <a href="{{ url_for('edit_post', post_id=post['_id']) }}" class="btn btn-warning">Edit</a>
                <a href="{{ url_for('delete_post', post_id=post['_id']) }}" class="btn btn-danger">Delete</a>
                {% endif %}
            </li>
            {% endfor %}
        </ul>
    </div>
    {% endblock %}